<!DOCTYPE HTML>
<html>
<head>
  <meta charset="utf-8">
  
  <title>W01fh4cker&#39;s blog</title>

  
  <meta name="author" content="W01fh4cker">
  

  
  <meta name="description" content="Doubt is the key to knowledge.">
  

  

  <meta id="viewport" name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no, minimal-ui">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">

  

  <meta property="og:site_name" content="W01fh4cker&#39;s blog"/>

  
  <meta property="og:image" content="/favicon.ico"/>
  

  <link href="/favicon.ico" rel="icon">
  <link rel="alternate" href="/atom.xml" title="W01fh4cker&#39;s blog" type="application/atom+xml">
  <link rel="stylesheet" href="/css/style.css" media="screen" type="text/css">
<meta name="generator" content="Hexo 7.3.0"></head>


<body>
<div class="blog">
  <div class="content">

    <header>
  <div class="site-branding">
    <h1 class="site-title">
      <a href="/">W01fh4cker&#39;s blog</a>
    </h1>
    <p class="site-description"></p>
  </div>
  <nav class="site-navigation">
    <ul>
      
    </ul>
  </nav>
</header>

    <main class="site-main posts-loop">
    
  <article>

  
    
    <h3 class="article-title"><a href="/2024/12/30/LearnJavaMemshellFromZero/"><span>完全零基础从0到1掌握Java内存马</span></a></h3>
    
  

  <div class="article-top-meta">
    <span class="posted-on">
      <a href="/2024/12/30/LearnJavaMemshellFromZero/" rel="bookmark">
        <time class="entry-date published" datetime="2024-12-30T06:04:53.000Z">
          2024-12-30
        </time>
      </a>
    </span>
  </div>


  

  <div class="article-content">
    <div class="entry">
      
        <figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="https://socialify.git.ci/W01fh4cker/LearnJavaMemshellFromZero/image?description=1&descriptionEditable=%E3%80%90%E5%8E%9F%E5%88%9B%E3%80%91%E5%AE%8C%E5%85%A8%E9%9B%B6%E5%9F%BA%E7%A1%80%E4%BB%8E0%E5%88%B01%E6%8E%8C%E6%8F%A1Java%E5%86%85%E5%AD%98%E9%A9%AC&forks=1&issues=1&language=1&logo=https%3A%2F%2Fs2.loli.net%2F2022%2F06%2F25%2FgUAh2V5CiD96y8G.jpg&owner=1&pattern=Brick%20Wall&pulls=1&stargazers=1" alt="" title="">
                </div>
                <div class="image-caption"></div>
            </figure> 

<p>本文目录：</p>
<ul>
<li><a href="#%E4%B8%80%E5%89%8D%E8%A8%80">一、前言</a></li>
<li><a href="#%E4%BA%8C%E5%89%8D%E7%BD%AE%E7%9F%A5%E8%AF%86">二、前置知识</a><ul>
<li><a href="#21-servlet%E5%AE%B9%E5%99%A8%E4%B8%8Eenginehostcontext%E5%92%8Cwrapper">2.1 Servlet容器与Engine、Host、Context和Wrapper</a></li>
<li><a href="#22-%E7%BC%96%E5%86%99%E4%B8%80%E4%B8%AA%E7%AE%80%E5%8D%95%E7%9A%84servlet">2.2 编写一个简单的servlet</a></li>
<li><a href="#23-%E4%BB%8E%E4%BB%A3%E7%A0%81%E5%B1%82%E9%9D%A2%E7%9C%8Bservlet%E5%88%9D%E5%A7%8B%E5%8C%96%E4%B8%8E%E8%A3%85%E8%BD%BD%E6%B5%81%E7%A8%8B">2.3 从代码层面看servlet初始化与装载流程</a><ul>
<li><a href="#231-servlet%E5%88%9D%E5%A7%8B%E5%8C%96%E6%B5%81%E7%A8%8B%E5%88%86%E6%9E%90">2.3.1 servlet初始化流程分析</a></li>
<li><a href="#232-servlet%E8%A3%85%E8%BD%BD%E6%B5%81%E7%A8%8B%E5%88%86%E6%9E%90">2.3.2 servlet装载流程分析</a></li>
</ul>
</li>
<li><a href="#24-filter%E5%AE%B9%E5%99%A8%E4%B8%8Efilterdefsfilterconfigsfiltermapsfilterchain">2.4 Filter容器与FilterDefs、FilterConfigs、FilterMaps、FilterChain</a></li>
<li><a href="#25-%E7%BC%96%E5%86%99%E4%B8%80%E4%B8%AA%E7%AE%80%E5%8D%95%E7%9A%84filter">2.5 编写一个简单的Filter</a></li>
<li><a href="#26-%E4%BB%8E%E4%BB%A3%E7%A0%81%E5%B1%82%E9%9D%A2%E5%88%86%E6%9E%90filter%E8%BF%90%E8%A1%8C%E7%9A%84%E6%95%B4%E4%BD%93%E6%B5%81%E7%A8%8B">2.6 从代码层面分析Filter运行的整体流程</a></li>
<li><a href="#27-listener%E7%AE%80%E5%8D%95%E4%BB%8B%E7%BB%8D">2.7 Listener简单介绍</a></li>
<li><a href="#28-%E7%BC%96%E5%86%99%E4%B8%80%E4%B8%AA%E7%AE%80%E5%8D%95%E7%9A%84listenerservletrequestlistener">2.8 编写一个简单的Listener（ServletRequestListener）</a></li>
<li><a href="#29-%E4%BB%8E%E4%BB%A3%E7%A0%81%E5%B1%82%E9%9D%A2%E5%88%86%E6%9E%90listener%E8%BF%90%E8%A1%8C%E7%9A%84%E6%95%B4%E4%BD%93%E6%B5%81%E7%A8%8B">2.9 从代码层面分析Listener运行的整体流程</a></li>
<li><a href="#210-%E7%AE%80%E5%8D%95%E7%9A%84spring%E9%A1%B9%E7%9B%AE%E6%90%AD%E5%BB%BA">2.10 简单的spring项目搭建</a><ul>
<li><a href="#2101-%E7%BC%96%E5%86%99%E4%B8%80%E4%B8%AA%E7%AE%80%E5%8D%95%E7%9A%84spring-controller">2.10.1 编写一个简单的Spring Controller</a></li>
<li><a href="#2102-%E7%BC%96%E5%86%99%E4%B8%80%E4%B8%AA%E7%AE%80%E5%8D%95%E7%9A%84spring-interceptor">2.10.2 编写一个简单的Spring Interceptor</a></li>
<li><a href="#2103-%E7%BC%96%E5%86%99%E4%B8%80%E4%B8%AA%E7%AE%80%E5%8D%95%E7%9A%84spring-webflux%E7%9A%84demo%E5%9F%BA%E4%BA%8Enetty">2.10.3 编写一个简单的Spring WebFlux的Demo（基于Netty）</a></li>
</ul>
</li>
<li><a href="#211-spring-mvc%E4%BB%8B%E7%BB%8D">2.11 Spring MVC介绍</a><ul>
<li><a href="#2111-spring-mvc%E4%B9%9D%E5%A4%A7%E7%BB%84%E4%BB%B6">2.11.1 Spring MVC九大组件</a></li>
<li><a href="#2112-%E7%AE%80%E5%8D%95%E7%9A%84%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90">2.11.2 简单的源码分析</a><ul>
<li><a href="#21121-%E4%B9%9D%E5%A4%A7%E7%BB%84%E4%BB%B6%E7%9A%84%E5%88%9D%E5%A7%8B%E5%8C%96">2.11.2.1 九大组件的初始化</a></li>
<li><a href="#21122-url%E5%92%8Ccontroller%E7%9A%84%E5%85%B3%E7%B3%BB%E7%9A%84%E5%BB%BA%E7%AB%8B">2.11.2.2 url和Controller的关系的建立</a></li>
<li><a href="#21123-spring-interceptor%E5%BC%95%E5%85%A5%E4%B8%8E%E6%89%A7%E8%A1%8C%E6%B5%81%E7%A8%8B%E5%88%86%E6%9E%90">2.11.2.3 Spring Interceptor引入与执行流程分析</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#212-spring-webflux%E4%BB%8B%E7%BB%8D%E4%B8%8E%E4%BB%A3%E7%A0%81%E8%B0%83%E8%AF%95%E5%88%86%E6%9E%90">2.12 Spring WebFlux介绍与代码调试分析</a><ul>
<li><a href="#2121-%E4%BB%80%E4%B9%88%E6%98%AFmono">2.12.1 什么是Mono？</a></li>
<li><a href="#2122-%E4%BB%80%E4%B9%88%E6%98%AFflux">2.12.2 什么是Flux？</a></li>
<li><a href="#2123-spring-webflux%E5%90%AF%E5%8A%A8%E8%BF%87%E7%A8%8B%E5%88%86%E6%9E%90">2.12.3 Spring WebFlux启动过程分析</a></li>
<li><a href="#2124-spring-webflux%E8%AF%B7%E6%B1%82%E5%A4%84%E7%90%86%E8%BF%87%E7%A8%8B%E5%88%86%E6%9E%90">2.12.4 Spring WebFlux请求处理过程分析</a></li>
<li><a href="#2125-spring-webflux%E8%BF%87%E6%BB%A4%E5%99%A8webfilter%E8%BF%90%E8%A1%8C%E8%BF%87%E7%A8%8B%E5%88%86%E6%9E%90">2.12.5 Spring WebFlux过滤器WebFilter运行过程分析</a></li>
</ul>
</li>
<li><a href="#213-tomcat-valve%E4%BB%8B%E7%BB%8D%E4%B8%8E%E8%BF%90%E8%A1%8C%E8%BF%87%E7%A8%8B%E5%88%86%E6%9E%90">2.13 Tomcat Valve介绍与运行过程分析</a><ul>
<li><a href="#2131-valve%E4%B8%8Epipeline">2.13.1 Valve与Pipeline</a></li>
<li><a href="#2132-%E7%BC%96%E5%86%99%E4%B8%80%E4%B8%AA%E7%AE%80%E5%8D%95tomcat-valve%E7%9A%84demo">2.13.2 编写一个简单Tomcat Valve的demo</a></li>
<li><a href="#2133-tomcat-valve%E6%89%93%E5%85%A5%E5%86%85%E5%AD%98%E9%A9%AC%E6%80%9D%E8%B7%AF%E5%88%86%E6%9E%90">2.13.3 Tomcat Valve打入内存马思路分析</a></li>
</ul>
</li>
<li><a href="#214-tomcat-upgrade%E4%BB%8B%E7%BB%8D%E4%B8%8E%E6%89%93%E5%85%A5%E5%86%85%E5%AD%98%E9%A9%AC%E6%80%9D%E8%B7%AF%E5%88%86%E6%9E%90">2.14 Tomcat Upgrade介绍与打入内存马思路分析</a><ul>
<li><a href="#2141-%E7%BC%96%E5%86%99%E4%B8%80%E4%B8%AA%E7%AE%80%E5%8D%95%E7%9A%84tomcat-upgrade%E7%9A%84demo">2.14.1 编写一个简单的Tomcat Upgrade的demo</a><ul>
<li><a href="#21411-%E5%88%A9%E7%94%A8springboot%E6%90%AD%E5%BB%BA">2.14.1.1 利用SpringBoot搭建</a></li>
<li><a href="#21412-%E5%88%A9%E7%94%A8tomcat%E6%90%AD%E5%BB%BA">2.14.1.2 利用Tomcat搭建</a></li>
</ul>
</li>
<li><a href="#2142-tomcat-upgrade%E5%86%85%E5%AD%98%E9%A9%AC%E4%BB%8B%E7%BB%8D%E4%B8%8E%E7%9B%B8%E5%85%B3%E4%BB%A3%E7%A0%81%E8%B0%83%E8%AF%95%E5%88%86%E6%9E%90">2.14.2 Tomcat Upgrade内存马介绍与相关代码调试分析</a></li>
</ul>
</li>
<li><a href="#215-tomcat-executor%E5%86%85%E5%AD%98%E9%A9%AC%E4%BB%8B%E7%BB%8D%E4%B8%8E%E6%89%93%E5%85%A5%E5%86%85%E5%AD%98%E9%A9%AC%E6%80%9D%E8%B7%AF%E5%88%86%E6%9E%90">2.15 Tomcat Executor内存马介绍与打入内存马思路分析</a><ul>
<li><a href="#2151">2.15.1</a></li>
<li><a href="#2152-tomcat-executor%E5%86%85%E5%AD%98%E9%A9%AC%E4%BB%8B%E7%BB%8D%E4%B8%8E%E4%BB%A3%E7%A0%81%E8%B0%83%E8%AF%95%E5%88%86%E6%9E%90">2.15.2 Tomcat Executor内存马介绍与代码调试分析</a><ul>
<li><a href="#21521-endpoint%E4%BA%94%E5%A4%A7%E7%BB%84%E4%BB%B6">2.15.2.1 Endpoint五大组件</a></li>
<li><a href="#21522-endpoint%E5%88%86%E7%B1%BB">2.15.2.2 Endpoint分类</a></li>
<li><a href="#21523-executor%E7%9B%B8%E5%85%B3%E4%BB%A3%E7%A0%81%E5%88%86%E6%9E%90">2.15.2.3 Executor相关代码分析</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><a href="#%E4%B8%89%E4%BC%A0%E7%BB%9Fweb%E5%9E%8B%E5%86%85%E5%AD%98%E9%A9%AC">三、传统Web型内存马</a><ul>
<li><a href="#31-servlet%E5%86%85%E5%AD%98%E9%A9%AC">3.1 Servlet内存马</a><ul>
<li><a href="#311-%E7%AE%80%E5%8D%95%E7%9A%84servlet%E5%86%85%E5%AD%98%E9%A9%ACdemo%E7%BC%96%E5%86%99">3.1.1 简单的servlet内存马demo编写</a></li>
<li><a href="#312-servlet%E5%86%85%E5%AD%98%E9%A9%ACdemo%E4%BB%A3%E7%A0%81%E5%88%86%E6%9E%90">3.1.2 servlet内存马demo代码分析</a></li>
<li><a href="#313-%E5%85%B3%E4%BA%8Estandardcontextapplicationcontextservletcontext%E7%9A%84%E7%90%86%E8%A7%A3">3.1.3 关于StandardContext、ApplicationContext、ServletContext的理解</a></li>
</ul>
</li>
<li><a href="#32-filter%E5%86%85%E5%AD%98%E9%A9%AC">3.2 Filter内存马</a><ul>
<li><a href="#321-%E7%AE%80%E5%8D%95%E7%9A%84filter%E5%86%85%E5%AD%98%E9%A9%ACdemo%E7%BC%96%E5%86%99">3.2.1 简单的filter内存马demo编写</a></li>
<li><a href="#322-servlet%E5%86%85%E5%AD%98%E9%A9%ACdemo%E4%BB%A3%E7%A0%81%E5%88%86%E6%9E%90">3.2.2 servlet内存马demo代码分析</a></li>
<li><a href="#323-tomcat6%E4%B8%8Bfilter%E5%86%85%E5%AD%98%E9%A9%AC%E7%9A%84%E7%BC%96%E5%86%99">3.2.3 tomcat6下filter内存马的编写</a></li>
</ul>
</li>
<li><a href="#33-listener%E5%86%85%E5%AD%98%E9%A9%AC">3.3 Listener内存马</a><ul>
<li><a href="#331-%E7%AE%80%E5%8D%95%E7%9A%84listener%E5%86%85%E5%AD%98%E9%A9%ACdemo%E7%BC%96%E5%86%99">3.3.1 简单的Listener内存马demo编写</a></li>
<li><a href="#332-listener%E5%86%85%E5%AD%98%E9%A9%ACdemo%E4%BB%A3%E7%A0%81%E5%88%86%E6%9E%90">3.3.2 Listener内存马demo代码分析</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#%E5%9B%9Bspring-mvc%E6%A1%86%E6%9E%B6%E5%9E%8B%E5%86%85%E5%AD%98%E9%A9%AC">四、Spring MVC框架型内存马</a><ul>
<li><a href="#41-spring-controller%E5%9E%8B%E5%86%85%E5%AD%98%E9%A9%AC">4.1 Spring Controller型内存马</a><ul>
<li><a href="#411-%E7%AE%80%E5%8D%95%E7%9A%84spring-controller%E5%9E%8B%E5%86%85%E5%AD%98%E9%A9%ACdemo%E7%BC%96%E5%86%99">4.1.1 简单的Spring Controller型内存马demo编写</a></li>
<li><a href="#412-spring-controller%E5%9E%8B%E5%86%85%E5%AD%98%E9%A9%ACdemo%E4%BB%A3%E7%A0%81%E5%88%86%E6%9E%90">4.1.2 Spring Controller型内存马demo代码分析</a></li>
</ul>
</li>
<li><a href="#42-spring-interceptor%E5%9E%8B%E5%86%85%E5%AD%98%E9%A9%AC">4.2 Spring Interceptor型内存马</a></li>
<li><a href="#43-spring-webflux%E5%86%85%E5%AD%98%E9%A9%AC">4.3 Spring WebFlux内存马</a><ul>
<li><a href="#431-%E7%AE%80%E5%8D%95%E7%9A%84spring-webflux%E5%86%85%E5%AD%98%E9%A9%ACdemo%E7%BC%96%E5%86%99">4.3.1 简单的Spring WebFlux内存马demo编写</a></li>
<li><a href="#432-spring-webflux%E5%86%85%E5%AD%98%E9%A9%ACdemo%E4%BB%A3%E7%A0%81%E5%88%86%E6%9E%90">4.3.2 Spring WebFlux内存马demo代码分析</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#%E4%BA%94%E4%B8%AD%E9%97%B4%E4%BB%B6%E5%9E%8B%E5%86%85%E5%AD%98%E9%A9%AC">五、中间件型内存马</a><ul>
<li><a href="#51-tomcat-valve%E5%9E%8B%E5%86%85%E5%AD%98%E9%A9%AC">5.1 Tomcat Valve型内存马</a></li>
<li><a href="#52-tomcat-upgrade%E5%86%85%E5%AD%98%E9%A9%AC">5.2 Tomcat Upgrade内存马</a></li>
<li><a href="#53-tomcat-executor%E5%86%85%E5%AD%98%E9%A9%AC">5.3 Tomcat Executor内存马</a></li>
</ul>
</li>
<li><a href="#%E5%85%AD%E8%87%B4%E8%B0%A2">六、致谢</a></li>
</ul>
        
      
    </div>

  </div>

  <div class="article-footer">
    <div class="article-meta pull-left">

    

    
    

    <span class="post-tags">
      <i class="icon-tags"></i>
        <a href="/tags/Java/">Java</a><a href="/tags/Memshell/">Memshell</a>
    </span>
    

    </div>

    
  </div>
</article>




<nav class="pagination">
  
  
</nav>
    </main>

    <footer class="site-footer">
  <p class="site-info">
    Proudly powered by <a href="https://hexo.io/" target="_blank">Hexo</a> and
    Theme by <a href="https://github.com/CodeDaraW/Hacker" target="_blank">Hacker</a>
    </br>
    
    &copy; 2024 W01fh4cker
    
  </p>
</footer>
    
    
  </div>
</div>
</body>
</html>